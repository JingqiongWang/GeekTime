**基于物品的协同过滤**的两个公式

1、物品 $j1​$ 和 $j2​$ 之间的相似度（夹角余弦）：
$$
{is}_{j1,j2} = \frac{\mathbf{X}_{,j1} \cdot \mathbf{X}_{,j2}}{||\mathbf{X}_{,j1}||_2 \times ||\mathbf{X}_{,j2}||_2} = \frac{\sum_{i=1}^{m}{x}_{i,j1} \times {x}_{i,j2}}{\sqrt{\sum_{i=1}^{m}{x}_{i,j1}} \sqrt{\sum_{i=1}^{m}{x}_{i,j2}}}
$$
$\mathbf{X}_{j1}$ 表示 $\mathbf{X}$ 中第 $j1$ 列的列向量，$\mathbf{X}_{j2}$ 表示 $\mathbf{X}$ 中第 $2j$ 列的列向量，分子是两个物品喜好度的列向量的点乘，分母是这两个列向量 $\mathbf{L2}​$ 范数的乘积。

2、利用第一个公式所计算的物品间的相似度和用户对物品的喜好度，预测任何一个用户$i$ 对任何一个物品 $j​$ 的喜好度（除以分母是为了归一化）：
$$
{p}_{i,j} = \frac{\sum_{k=1}^{n}{x}_{i,k} \times {is}_{k,j}}{\sum_{k=1}^{m}{is}_{k,j}}
$$


根据本节中示例，
$$
\mathbf{X} = \begin{vmatrix} 0.11 & 0.20 & 0.0 \\ 0.81 & 0.0 & 0.0 \\0.0 & 0.88 & 0.74 \\ 0.0 & 0.0 & 0.42 \\\end{vmatrix}
$$

$$
\mathbf{X}^{'} = \begin{vmatrix} 0.11 & 0.81 & 0.0 & 0.0 \\ 0.20 & 0.0 & 0.88 & 0.0 \\0.0 & 0.0 & 0.74 & 0.42 \\\end{vmatrix}
$$
物品对物品，
$$
\mathbf{Y} = \mathbf{X}^{'} \cdot \mathbf{X} = \begin{vmatrix} 0.6682 & 0.022 & 0.0 \\ 0.022 & 0.8144 & 0.6512 \\ 0.0 & 0.6512 & 0.724 \\\end{vmatrix}
$$
取出对角线元素 ，并做乘积处理，
$$
\mathbf{V} = \begin{vmatrix} 0.6682*0.6682 & 0.6682*0.8144 & 0.6682*0.724 \\ 0.8144*0.6682 & 0.8144*0.8144 & 0.8144*0.724 \\ 0.724*0.6682 & 0.724*0.8144 & 0.724*0.6682 \\ \end{vmatrix} = \begin{vmatrix} 0.44649124 & 0.54418208 & 0.4837768 \\ 0.54418208 & 0.6632473600000001 & 0.5896256 \\ 0.4837768 & 0.5896256 & 0.4837768\\ \end{vmatrix}
$$
则，物品相似度矩阵为：
$$
\mathbf{IS} = \mathbf{Y} / \mathbf{V} = \begin{vmatrix} 1.49655792 & 0.04042765 & 0. \\ 0.04042765 & 1.22789784 & 1.10442966 \\ 0. & 1.10442966 & 1.49655792 \\ \end{vmatrix}
$$
任意用户对任意物品的喜好度：
$$
\mathbf{ISP} = \mathbf{X} \cdot \mathbf{IS} = \begin{vmatrix} 0.1727069  & 0.25002661  & 0.22088593 \\ 1.21221191  & 0.03274639  & 0. \\ 0.03557633 & 1.89782805 & 2.07935096 \\ 0. & 0.46386046  & 0.62855433 \\ \end{vmatrix}
$$
对 $\mathbf{ISP}$ 按行求和，
$$
\mathbf{ISR} = \begin{vmatrix} 0.64361944 & 0.64361944  & 0.64361944  \\ 1.24495831 & 1.24495831 & 1.24495831 \\ 4.01275533 & 4.01275533 & 4.01275533 \\ 1.09241478 & 1.09241478 & 1.09241478 \\ \end{vmatrix}
$$


归一化的矩阵 $\mathbf{P}$ , 即用户对物品的喜好度的矩阵：
$$
\mathbf{P} = \mathbf{ISP} / \mathbf{ISR} = \begin{vmatrix} 0.26833698 & 0.38846963 & 0.34319338 \\ 0.97369679 & 0.0263032 & 0. \\ 0.00886581 & 0.47294886 & 0.51818533 \\ 0. & 0.42461935 & 0.57538065 \\ \end{vmatrix}
$$




